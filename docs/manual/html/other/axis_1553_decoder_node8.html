<!DOCTYPE HTML>

<!--Converted with LaTeX2HTML 2024 (Released January 1, 2024) -->
<HTML lang="en">
<HEAD>
<TITLE>Decoding Method</TITLE>

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="viewport" CONTENT="width=device-width, initial-scale=1.0">
<META NAME="Generator" CONTENT="LaTeX2HTML v2024">

<LINK REL="STYLESHEET" HREF="html.css">

<LINK REL="previous" HREF="axis_1553_decoder_node7.html">
<LINK REL="next" HREF="axis_1553_decoder_node9.html">
</HEAD>

<BODY >

<DIV CLASS="navigation"><!--Navigation Panel-->
<A
 HREF="axis_1553_decoder_node9.html">
<IMG WIDTH="37" HEIGHT="24" ALT="next" SRC="next.png"></A> 
<A
 HREF="axis_1553_decoder_node7.html">
<IMG WIDTH="26" HEIGHT="24" ALT="up" SRC="up.png"></A> 
<A
 HREF="axis_1553_decoder_node7.html">
<IMG WIDTH="63" HEIGHT="24" ALT="previous" SRC="prev.png"></A> 
<A ID="tex2html62"
  HREF="axis_1553_decoder_node1.html">
<IMG WIDTH="65" HEIGHT="24" ALT="contents" SRC="contents.png"></A>  
<BR>
<B> Next:</B> <A
 HREF="axis_1553_decoder_node9.html">Building</A>
<B> Up:</B> <A
 HREF="axis_1553_decoder_node7.html">Architecture</A>
<B> Previous:</B> <A
 HREF="axis_1553_decoder_node7.html">Architecture</A>
 &nbsp; <B>  <A ID="tex2html63"
  HREF="axis_1553_decoder_node1.html">Contents</A></B> 
<BR>
<BR></DIV>
<!--End of Navigation Panel-->

<H2><A ID="SECTION00031000000000000000">
Decoding Method</A>
</H2>

<P>
This core has 5 always blocks that are sensitive to the positive clock edge. They are

<P>

<UL>
<LI><SPAN  CLASS="textbf">pause counter</SPAN> Checks for delays between receives to comply with 4us spacing.
</LI>
<LI><SPAN  CLASS="textbf">axis data output</SPAN> Deals with AXIS bus output data from the core based on its current state.
</LI>
<LI><SPAN  CLASS="textbf">data processing</SPAN> In charge of the state machine and processing of 1553 non-differential bitstream to AXIS output data.
</LI>
<LI><SPAN  CLASS="textbf">skip counter</SPAN> Aligns the sample counters based on the differential signal so sampling is aligned correctly.
</LI>
<LI><SPAN  CLASS="textbf">differential data input</SPAN> Process data from a differential input into a non-differential one.
</LI>
</UL>

<P>
Pause counter simply gets reset when not in the data capture or diff wait states. In those states the counter checks if the diff is equal (no input data) and counts down
till it reaches zero. This allows for detections of badly formed packets that ignore the spacing.

<P>
AXIS data output does exactly as it says. Once in the transmit state, in this case this means we can transmit the decoded 1553 data over the AXIS bus. Once we are out of this state
the data is wiped.

<P>
Data processing block does most of the work. It is in charge of the state machine state and decoding the 1553 non-differential bitstream. Command bit refers to the TUSER output. Essentially
the state machine does the following:

<OL>
<LI>Startup in error state, which does to the default handler that puts it into diff wait.
</LI>
<LI>In diff wait check for a change in the diff input signals. Once that has happened goto the data capture state.
</LI>
<LI>In data capture wait for the trans_counter to reach zero. Once at zero check the sync pulse type. Then go to data reduce, unless the pause_counter timed out in the data capture state, then we go back to the diff wait.
</LI>
<LI>In data reduce use the bit slice offset to capute a bit from the stream of data. Capture the parity bit, and set the output command bits for invert and delay to the correct state. Move on to parity gen.
</LI>
<LI>In parity gen check the parity bit against the parity bit generated by the module. Set the command bit to tell the user if there is an error or not.
</LI>
<LI>Trans just goes right back to diff wait. Only needs a cycle to let the AXIS data output to do its thing.
</LI>
</OL>

<P>
Skip counter is a set of conditions to reset skip counter to 0. If it is not reset the skip counter will increase. This allows us to sample the
correct bit from the oversampled stream. The conditions to reset are:

<OL>
<LI>If in diff wait state and no difference in diff input, hold skip counter at current value.
</LI>
<LI>If pause counter is 0, and no difference in diff input, reset skip counter to 0.
</LI>
<LI>If there is a positive edge on diff, reset skip counter to 0.
</LI>
<LI>If there is a negative edge of diff, reset skip counter to 0.
</LI>
<LI>Error? Reset registered to all ones and skip counter to 0.
</LI>
</OL>

<P>
Differential data input waits for the data capture state. In this state the capture is started and the signal is sampled at the input clock. This is reduced using
a counter to pick the samples needed via the skip counter being compared to sample select. Captured data is then shifted into a register and the transmit counter
is decremented. This continues till the transmit counter is 0, or the pause counter is 0 and the diff signal is equal. All other states reset the data registers
for capturing data to its synthetic clock and the transmit counter back to its initial value before decrement.

<P>

<DIV CLASS="navigation"><HR>
<!--Navigation Panel-->
<A
 HREF="axis_1553_decoder_node9.html">
<IMG WIDTH="37" HEIGHT="24" ALT="next" SRC="next.png"></A> 
<A
 HREF="axis_1553_decoder_node7.html">
<IMG WIDTH="26" HEIGHT="24" ALT="up" SRC="up.png"></A> 
<A
 HREF="axis_1553_decoder_node7.html">
<IMG WIDTH="63" HEIGHT="24" ALT="previous" SRC="prev.png"></A> 
<A ID="tex2html62"
  HREF="axis_1553_decoder_node1.html">
<IMG WIDTH="65" HEIGHT="24" ALT="contents" SRC="contents.png"></A>  
<BR>
<B> Next:</B> <A
 HREF="axis_1553_decoder_node9.html">Building</A>
<B> Up:</B> <A
 HREF="axis_1553_decoder_node7.html">Architecture</A>
<B> Previous:</B> <A
 HREF="axis_1553_decoder_node7.html">Architecture</A>
 &nbsp; <B>  <A ID="tex2html63"
  HREF="axis_1553_decoder_node1.html">Contents</A></B> </DIV>
<!--End of Navigation Panel-->

</BODY>
</HTML>
